(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{7792:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/[id]",function(){return e(2857)}])},4627:function(n,t){"use strict";t.Z={src:"/_next/static/media/logo.bebc6ea0.webp",height:217,width:998,blurDataURL:"data:image/webp;base64,UklGRm4AAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAT4xGTkVGXD+UnjhAQj9HOQBWUDggNgAAALABAJ0BKggAAgACQDglAE6AId8Zv3gA/upd/TNb9zgv8w8T7xx92nvreGa6ZzIfJg1r6GvAAA=="}},8461:function(n,t,e){"use strict";e.r(t);var r=e(603),i=e(5893),o=e(7294),c=e(2293),s=e(7357),a=e(155),l=e(3946),u=e(5861),d=e(3375),h=e(3156),x=e(9661),f=e(2389),p=e(3599),m=e(4627),g=e(5675),j=e.n(g),Z=e(1163),k=e.n(Z),A=e(3299);t.default=function(){var n=function(){v(null)},t=(0,r.Z)(o.useState(null),2),e=t[0],g=t[1],Z=(0,r.Z)(o.useState(null),2),b=Z[0],v=Z[1],C=(0,r.Z)(o.useState(""),2),w=C[0],_=C[1],y=(0,A.useSession)();if(o.useEffect((function(){var n=window.localStorage.getItem("data");null!==n&&_(JSON.parse(n))}),[]),"authenticated"==y.status){y.data.user.email;var S=y.data.user.image;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.Z,{position:"static",color:"primary",enableColorOnDark:!0,style:{background:"#A9A9A9"},children:(0,i.jsx)(h.Z,{maxWidth:"xl",children:(0,i.jsxs)(a.Z,{disableGutters:!0,children:[(0,i.jsx)(u.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},onClick:function(){return k().push("/")},children:(0,i.jsx)(j(),{src:m.Z,alt:"logo",width:175,height:45})}),(0,i.jsxs)(s.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,i.jsx)(l.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(n){g(n.currentTarget)},color:"inherit",children:(0,i.jsx)(d.Z,{})}),(0,i.jsx)(d.Z,{id:"menu-appbar",anchorEl:e,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(e),onClose:function(){g(null)},sx:{display:{xs:"block",md:"none"}}})]}),(0,i.jsx)(u.Z,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:(0,i.jsx)(j(),{src:m.Z,alt:"logo",width:175,height:45})}),(0,i.jsx)(s.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),(0,i.jsxs)(s.Z,{sx:{flexGrow:0},children:[(0,i.jsx)(f.Z,{title:"Open settings",children:(0,i.jsx)(l.Z,{onClick:function(n){v(n.currentTarget)},sx:{p:0},children:(0,i.jsx)(x.Z,{alt:"Gmail Photo",src:S})})}),(0,i.jsxs)(d.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(b),onClose:n,children:[(0,i.jsx)(p.Z,{onClick:function(){n(),k().push("/dashboard/profile/"+w.user_id)},children:"Profile"}),(0,i.jsx)(p.Z,{onClick:function(){(0,A.signOut)(),n(),k().push("/")},children:"Signout"})]})]})]})})})})}return(0,i.jsx)("div",{children:(0,i.jsx)("p",{children:" Please sign in."})})}},2857:function(n,t,e){"use strict";e.r(t),e.d(t,{UserDetailsContext:function(){return T},__N_SSG:function(){return S},default:function(){return O}});var r=e(7568),i=e(4924),o=e(603),c=e(4051),s=e.n(c),a=e(5893),l=e(3156),u=e(6886),d=e(7357),h=e(3321),x=e(7720),f=e(8461),p=e(1163),m=e.n(p),g=e(3299),j=e(7294),Z=e(1081),k=e(2979),A=e(5113),b=e(7906),v=e(295),C=e(3252),w=e(2882),_=e(3184),y=e(3816),S=!0,T=(0,j.createContext)();function P(){return Math.round(20*Math.random())-10}function N(){var n=50+P(),t=50+P();return{top:"".concat(n,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(n,"%, -").concat(t,"%)")}}var E=(0,k.Z)((function(n){return{paper:{position:"absolute",backgroundColor:"white",boxShadow:"black",padding:"0",outline:"none"}}}));function O(n){var t=n.data,e=n.id,c=function(){var n=(0,r.Z)(s().mark((function n(t){var e,o,c,a,l,u,d;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=function(n,t,e){return c.apply(this,arguments)},c=function(){return c=(0,r.Z)(s().mark((function n(t,e,r){var o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://just-chamois-38.hasura.app/v1/graphql",{method:"POST",headers:(0,i.Z)({},"x-hasura-admin-secret","MLy43KG049rHc1UVMsodU7dVHYrouGG3KEJ18Pm7z45qdxhZqAcnVte00i7uO4HY"),body:JSON.stringify({query:t,variables:r,operationName:e})});case 2:return o=n.sent,n.next=5,o.json();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)}))),c.apply(this,arguments)},l=function(){return o(a,"MyMutation",e)},u=function(){return d.apply(this,arguments)},d=function(){return d=(0,r.Z)(s().mark((function n(){var t,e,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l();case 2:t=n.sent,e=t.errors,r=t.data,e&&console.error(e),console.log(r),console.log("ran");case 8:case"end":return n.stop()}}),n)}))),d.apply(this,arguments)},n.next=7,{ticket_id:Number(W.ticket_id),totalLoads:Number($)};case 7:e=n.sent,console.log("payload ready..."+JSON.stringify(e)),e&&(console.log("ran"),a="\n  mutation MyMutation($ticket_id: Int = 0, $totalLoads: Int = 0) {\n    update_Tickets_by_pk(pk_columns: {ticket_id: $ticket_id}, _set: {totalLoads: $totalLoads}) {\n      totalLoads\n    }\n  }\n",u());case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),p=(0,o.Z)(j.useState(!1),2),k=p[0],S=p[1],P=(0,o.Z)(j.useState(N),1)[0],O=(0,o.Z)(j.useState(),2),I=O[0],U=O[1],L=E(),G=(0,o.Z)(j.useState([]),2),F=G[0],M=G[1],z=(0,o.Z)(j.useState([]),2),J=z[0],D=z[1],B=(0,o.Z)(j.useState({}),2),W=B[0],Q=B[1],V=(0,o.Z)(j.useState(!1),2),H=V[0],K=V[1],q=(0,o.Z)(j.useState(),2),R=(q[0],q[1]),X=(0,o.Z)(j.useState(),2),$=X[0],Y=X[1],nn=(0,g.useSession)(),tn=(0,o.Z)(j.useState(""),2),en=tn[0],rn=tn[1],on=(0,o.Z)(j.useState(""),2),cn=on[0],sn=on[1];j.useEffect((function(){"authenticated"===nn.status&&rn(JSON.parse(localStorage.getItem("data")))}),[nn.status]),j.useEffect((function(){return t.data.Users.map((function(n){return M(n.Tickets)})),new Promise((function(n){setTimeout((function(){n(F?t.data.Users.map((function(n){return n.Tickets.map((function(n,t,e){if(t+1===e.length)return D(n),localStorage.setItem("data",JSON.stringify(n))}))})):"null",sn(t.data.Users.map((function(n){return n.Tickets.map((function(n,t,e){if(t+1===e.length)return n.ticket_id})).join("")}))))}),1e3)})),R(),function(){}}),[]);var an=function(){var n=(0,r.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S(!1);case 2:return n.next=4,Y(t.data.Users.map((function(n){if(n.uid===e)return n.Tickets.filter((function(n){return n.ticket_id===en.ticket_id})).map((function(n){return JSON.stringify(n.Loads.filter((function(n){return n.ticket_id===en.ticket_id})).map((function(n){return n.ton})).reduce((function(n,t){return n+t}),0))}))})));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),ln=function(){return console.log($),I?(0,a.jsx)(Z.Z,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:k,onClose:an,sx:{flexGrow:1,display:{xs:10}},children:(0,a.jsx)("div",{style:P,className:L.paper,children:(0,a.jsx)(w.Z,{component:A.Z,children:(0,a.jsxs)(b.Z,{children:[(0,a.jsx)(_.Z,{children:(0,a.jsxs)(y.Z,{children:[(0,a.jsx)(C.Z,{align:"right",children:"Ticket ID"}),(0,a.jsx)(C.Z,{align:"right",children:"Customer Name"}),(0,a.jsx)(C.Z,{align:"right",children:"Phone"}),(0,a.jsx)(C.Z,{align:"right",children:"Total Loads"})]})}),(0,a.jsx)(v.Z,{children:F.map((function(n,t){return(0,a.jsxs)(y.Z,{onClick:function(){Q(n),D(n),an(),K(!0),localStorage.setItem("data",JSON.stringify(n))},sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,a.jsx)(C.Z,{align:"right",component:"th",scope:"row",children:n.ticket_id}),(0,a.jsx)(C.Z,{align:"right",children:n.customerName}),(0,a.jsx)(C.Z,{align:"right",children:n.phone}),(0,a.jsx)(C.Z,{align:"right",children:n.totalLoads})]},t)}))})]})})})}):null};return(0,a.jsxs)(T.Provider,{value:[J],children:[(0,a.jsx)(f.default,{}),(0,a.jsx)("br",{}),(0,a.jsxs)(l.Z,{static:!0,children:[(0,a.jsx)(ln,{}),(0,a.jsx)(u.ZP,{container:!0,columns:12,direction:"column",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(u.ZP,{item:!0,xs:6,sx:{height:"50px",width:"100%",backgroundColor:"white",color:"#000",textAlign:"center"},children:(0,a.jsx)(d.Z,{variant:"outlined",sx:{height:"50px",width:"100%",backgroundColor:"white",borderTop:1,borderBottom:1,position:"relative",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},children:(0,a.jsx)(h.Z,{onClick:function(){S(!0),U({data:t})},children:(0,a.jsx)("p",{children:"View Ticket"})})})})}),(0,a.jsx)(u.ZP,{container:!0,spacing:2,columns:12,direction:"column",justifyContent:"center",alignItems:"center",xs:!0,zeroMinWidth:!0,children:(0,a.jsx)(u.ZP,{item:!0,xs:4,children:(0,a.jsx)("h1",{children:"Current Ticket"})})}),(0,a.jsx)(u.ZP,{container:!0,spacing:2,columns:12,direction:"column",justifyContent:"center",alignItems:"center",xs:!0,zeroMinWidth:!0,children:(0,a.jsxs)(u.ZP,{item:!0,xs:6,children:[(0,a.jsxs)(d.Z,{sx:{width:335,height:"auto",backgroundColor:"#A9A9A9",direction:"column",justifyContent:"center",alignItems:"center",borderRadius:"5px"},children:[(0,a.jsx)("br",{}),(0,a.jsxs)(u.ZP,{container:!0,columns:16,direction:"column",justifyContent:"center",alignItems:"center",children:[(0,a.jsxs)(u.ZP,{container:!0,columns:16,direction:"row",justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(u.ZP,{item:!0,xs:10,children:H?(0,a.jsxs)("div",{children:["NAME: "," ",(0,a.jsx)("strong",{children:W.customerName})]}):t.data.Users.map((function(n){return n.Tickets.map((function(n,t,e){if(t+1===e.length)return(0,a.jsxs)("div",{children:["NAME: "," ",(0,a.jsx)("strong",{children:n.customerName})]})}))}))}),(0,a.jsx)(u.ZP,{item:!0,xs:4,children:H?(0,a.jsx)("p",{children:"TICKET: "+W.ticket_id}):t.data.Users.map((function(n){return n.Tickets.map((function(n,t,e){if(t+1===e.length)return(0,a.jsx)("p",{children:"TICKET: "+n.ticket_id})}))}))}),(0,a.jsx)(u.ZP,{item:!0,xs:8,children:H?(0,a.jsx)("p",{children:"PHONE: "+W.phone}):t.data.Users.map((function(n){return n.Tickets.map((function(n,t,e){if(t+1===e.length)return(0,a.jsx)("p",{children:"PHONE: "+n.phone})}))}))}),(0,a.jsx)(u.ZP,{item:!0,xs:6,children:(0,a.jsx)(h.Z,{variant:"outlined",sx:{backgroundColor:"#A9A9A9",height:"30px",color:"#000",borderColor:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return m().push("./ticketCon/"+e)},children:"Edit Ticket"})})]}),(0,a.jsx)(x.Z,{sx:{background:"black"}}),(0,a.jsx)(u.ZP,{item:!0,xs:8,direction:"column",children:(0,a.jsx)("h2",{children:" Total Loads"})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)("h1",{children:H?t.data.Users.map((function(n){if(n.uid===e)return n.Tickets.filter((function(n){return n.ticket_id===W.ticket_id})).map((function(n){return n.Loads.filter((function(n){return n.ticket_id===W.ticket_id})).map((function(n){return n.ton})).reduce((function(n,t){return n+t}),0)}))})):t.data.Users.map((function(n){if(n.uid===e)return n.Tickets.filter((function(n){return n.ticket_id===Number(cn)})).map((function(n){return n.Loads.filter((function(n){return n.ticket_id===Number(cn)})).map((function(n){return n.ton})).reduce((function(n,t){return n+t}),0)}))}))})}),(0,a.jsx)(u.ZP,{item:!0,xs:6,children:(0,a.jsx)(h.Z,{variant:"outlined",btn:!0,sx:{height:"47.225px",width:"167.5px;",backgroundColor:"#A9A9A9",borderColor:"#000",color:"#000",bottom:"15px","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return m().push("./createLoad/"+e)},children:"Add Load"})})]})]}),(0,a.jsx)(d.Z,{sx:{width:335,height:360,direction:"column",justifyContent:"center",alignItems:"center"},children:(0,a.jsxs)(u.ZP,{container:!0,direction:"column",columns:12,spacing:2,justifyContent:"center",alignItems:"center",paddingTop:"20px",children:[(0,a.jsx)(u.ZP,{item:!0,xs:6,children:(0,a.jsx)(h.Z,{variant:"outlined",sx:{height:"94.45px",width:"335px;",backgroundColor:"#A9A9A9",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:(0,r.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c();case 2:return n.next=4,m().push("./sendEmail/"+e);case 4:case"end":return n.stop()}}),n)}))),children:"Send Ticket"})}),(0,a.jsx)(u.ZP,{item:!0,xs:6,children:(0,a.jsx)(h.Z,{variant:"outlined",sx:{height:"94.45px",width:"335px;",backgroundColor:"#A9A9A9",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){m().push("./createTicket/"+e)},children:"Create Ticket"})}),(0,a.jsx)(u.ZP,{item:!0,xs:10,children:(0,a.jsx)(h.Z,{variant:"outlined",sx:{height:"64.45px",width:"335px;",backgroundColor:"#fff",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return m().push("./loadData/"+e)},children:"View Load"})})]})})]})})]})]})}O.auth={unauthorized:"/"}}},function(n){n.O(0,[32,830,229,823,362,979,176,774,888,179],(function(){return t=7792,n(n.s=t);var t}));var t=n.O();_N_E=t}]);