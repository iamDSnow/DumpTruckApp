(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{9104:function(t,e,n){"use strict";var i=n(7294),r=n(6600),a=n(5893);e.Z=function(t){const{children:e,defer:n=!1,fallback:o=null}=t,[u,d]=i.useState(!1);return(0,r.Z)((()=>{n||d(!0)}),[n]),i.useEffect((()=>{n&&d(!0)}),[n]),(0,a.jsx)(i.Fragment,{children:u?e:o})}},3380:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/sendEmail/[id]",function(){return n(2861)}])},4627:function(t,e){"use strict";e.Z={src:"/_next/static/media/logo.bebc6ea0.webp",height:217,width:998,blurDataURL:"data:image/webp;base64,UklGRm4AAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAT4xGTkVGXD+UnjhAQj9HOQBWUDggNgAAALABAJ0BKggAAgACQDglAE6AId8Zv3gA/upd/TNb9zgv8w8T7xx92nvreGa6ZzIfJg1r6GvAAA=="}},8461:function(t,e,n){"use strict";n.r(e);var i=n(603),r=n(5893),a=n(7294),o=n(2293),u=n(7357),d=n(155),s=n(3946),l=n(5861),c=n(3375),f=n(3156),m=n(9661),p=n(2389),x=n(3599),h=n(4627),j=n(5675),Z=n.n(j),v=n(1163),g=n.n(v),k=n(3299);e.default=function(){var t=function(){y(null)},e=(0,i.Z)(a.useState(null),2),n=e[0],j=e[1],v=(0,i.Z)(a.useState(null),2),b=v[0],y=v[1],_=(0,i.Z)(a.useState(""),2),S=_[0],A=_[1],T=(0,k.useSession)();if(a.useEffect((function(){var t=window.localStorage.getItem("data");null!==t&&A(JSON.parse(t))}),[]),"authenticated"==T.status){T.data.user.email;var C=T.data.user.image;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.Z,{position:"static",color:"primary",enableColorOnDark:!0,style:{background:"#A9A9A9"},children:(0,r.jsx)(f.Z,{maxWidth:"xl",children:(0,r.jsxs)(d.Z,{disableGutters:!0,children:[(0,r.jsx)(l.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},onClick:function(){return g().push("/")},children:(0,r.jsx)(Z(),{src:h.Z,alt:"logo",width:175,height:45})}),(0,r.jsxs)(u.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,r.jsx)(s.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){j(t.currentTarget)},color:"inherit",children:(0,r.jsx)(c.Z,{})}),(0,r.jsx)(c.Z,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(n),onClose:function(){j(null)},sx:{display:{xs:"block",md:"none"}}})]}),(0,r.jsx)(l.Z,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:(0,r.jsx)(Z(),{src:h.Z,alt:"logo",width:175,height:45})}),(0,r.jsx)(u.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),(0,r.jsxs)(u.Z,{sx:{flexGrow:0},children:[(0,r.jsx)(p.Z,{title:"Open settings",children:(0,r.jsx)(s.Z,{onClick:function(t){y(t.currentTarget)},sx:{p:0},children:(0,r.jsx)(m.Z,{alt:"Gmail Photo",src:C})})}),(0,r.jsxs)(c.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(b),onClose:t,children:[(0,r.jsx)(x.Z,{onClick:function(){t(),g().push("/dashboard/profile/"+S.user_id)},children:"Profile"}),(0,r.jsx)(x.Z,{onClick:function(){(0,k.signOut)(),t(),g().push("/")},children:"Signout"})]})]})]})})})})}return(0,r.jsx)("div",{children:(0,r.jsx)("p",{children:" Please sign in."})})}},2861:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSG:function(){return g},default:function(){return k}});var i=n(7568),r=n(4924),a=n(603),o=n(4051),u=n.n(o),d=n(5893),s=n(3156),l=n(6886),c=n(3321),f=n(64),m=n(8461),p=n(7294),x=n(7357),h=n(3299),j=n(9104),Z=n(1163),v=n.n(Z),g=!0;function k(t){var e=t.data,n=t.id,o=(0,a.Z)(p.useState(""),2),Z=o[0],g=o[1],k=(0,a.Z)(p.useState(""),2),b=k[0],y=k[1],_=(0,a.Z)(p.useState(""),2),S=_[0],A=_[1],T=(0,a.Z)(p.useState(""),2),C=T[0],w=T[1],P=(0,a.Z)(p.useState(""),2),N=P[0],U=P[1],I=(0,a.Z)(p.useState(""),2),L=I[0],E=I[1],O=(0,a.Z)(p.useState(""),2),D=O[0],G=O[1],z=(0,a.Z)(p.useState(0),2),F=z[0],Q=z[1],B=(0,a.Z)(p.useState(0),2),J=B[0],R=B[1],W=(0,a.Z)(p.useState(""),2),q=W[0],H=W[1],M=(0,a.Z)(p.useState(""),2),X=M[0],V=M[1],Y=(0,a.Z)(p.useState(""),2),K=Y[0],$=Y[1],tt=(0,a.Z)(p.useState(0),2),et=tt[0],nt=tt[1],it=(0,a.Z)(p.useState(0),2),rt=it[0],at=it[1],ot=(0,a.Z)(p.useState(""),2),ut=ot[0],dt=ot[1],st=(0,a.Z)(p.useState(""),2),lt=st[0],ct=st[1],ft=(0,h.useSession)(),mt=(0,a.Z)(p.useState([]),2),pt=mt[0],xt=mt[1],ht=(0,a.Z)(p.useState(""),2),jt=ht[0],Zt=ht[1],vt=(0,a.Z)(p.useState(""),2),gt=vt[0],kt=vt[1],bt=(0,a.Z)(p.useState(""),2),yt=bt[0],_t=bt[1],St=(0,a.Z)(p.useState(""),2),At=St[0],Tt=St[1],Ct=(0,a.Z)(p.useState(""),2),wt=Ct[0],Pt=Ct[1],Nt="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";p.useEffect((function(){"authenticated"===ft.status&&H(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.contractor}))})).join("")),ct(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.customerName}))})).join("")),ct(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.customerName}))})).join("")),G(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.phone}))})).join("")),Q(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.startTime}))})).join("")),R(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.endTime}))})).join("")),dt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.totalHours}))})).join("")),at(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.totalLoads}))})).join("")),V(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.deliveryLocation}))})).join("")),$(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.notes}))})).join("")),U(e.data.Users.map((function(t){if(t.uid===n)return t.driverLic})).join("")),E(e.data.Users.map((function(t){if(t.uid===n)return t.truckPlateNumber})).join("")),nt(e.data.Users.map((function(t){if(t.uid===n)return t.phone})).join("")),w(e.data.Users.map((function(t){if(t.uid===n)return t.company})).join("")),Ut.getTime(F),It.getTime(J),xt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.load_id}))}))}))),Zt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.loadSite}))}))}))),kt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.tripNumber}))}))}))),_t(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Material}))}))}))),Tt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.ton}))}))}))),Pt(JSON.parse(localStorage.getItem("data")))}),[ft.status]);var Ut=new Date,It=new Date;function Lt(){return Et.apply(this,arguments)}function Et(){return(Et=(0,i.Z)(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={company:C,driverLic:N,truckNumber:L,clientPhone:D,startTime:F,endTime:J,contractor:q,deliveryLocation:X,notes:K,phone:et,totalLoads:rt,totalHours:ut,customerName:lt,loadId:pt,loadSite:jt,tripNumber:gt,material:yt,ton:At},t.next=3,fetch("/api/mail.js",{method:"POST",body:JSON.stringify(e)});case 3:fetch("/pages/api/mail.js",{method:"POST",headers:(0,r.Z)({},"key",Nt),body:JSON.stringify(e)});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return console.log(pt),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m.default,{}),(0,d.jsx)("br",{}),(0,d.jsx)(j.Z,{children:(0,d.jsxs)(s.Z,{children:[(0,d.jsxs)("form",{onSubmit:Lt,children:[(0,d.jsx)(x.Z,{children:(0,d.jsxs)(l.ZP,{container:!0,columns:12,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,children:[(0,d.jsx)(l.ZP,{item:!0,children:(0,d.jsx)(f.Z,{required:!0,id:"outlined-required",label:"Email 1",name:"email1",type:"text",value:Z,style:{width:335},onChange:function(t){return g(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,children:(0,d.jsx)(f.Z,{id:"outlined",label:"Email 2",name:"email2",type:"text",value:b,style:{width:335},onChange:function(t){return y(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,children:(0,d.jsx)(f.Z,{id:"outlined",label:"Email 3",name:"email3",type:"text",value:S,style:{width:335},onChange:function(t){return A(t.target.value)}})})]})}),(0,d.jsx)("h4",{children:"Ticket Preview"}),(0,d.jsxs)(x.Z,{component:"form",children:[(0,d.jsxs)(l.ZP,{container:!0,row:12,rowSpacing:1,direction:"row",sx:{border:"1px solid #000",borderRadius:"5px"},children:[(0,d.jsx)("br",{}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Contractor",value:q,name:"contractorInput",onChange:function(t){return H(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Customer Name",value:lt,name:"customerNameInput",onChange:function(t){return ct(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Phone No.",value:et,name:"phoneInput",onChange:function(t){return nt(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Company",value:C,name:"companyInput",onChange:function(t){return w(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Truck No",value:L,name:"truckNumberInput",onChange:function(t){return E(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Driver Lic",value:N,name:"driverLicInput",onChange:function(t){return setDriverLic(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Client Phone No",value:D,name:"phoneClientInput",onChange:function(t){return G(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Start Time",value:Ut.toLocaleTimeString(),name:"startTimeInput",onChange:function(t){return Q(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"End Time",value:It.toLocaleTimeString(),name:"endTimeInput",onChange:function(t){return R(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Total Hours",value:ut,name:"totalHoursInput",onChange:function(t){return dt(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Delivery Address",value:X,name:"deliveryLocationInput",onChange:function(t){return V(t.target.value)}})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Notes/Details for Delivery",multiline:!0,value:K,name:"notesInput",onChange:function(t){return $(t.target.value)}})}),(0,d.jsxs)(x.Z,{children:[(0,d.jsxs)(l.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return(0,d.jsxs)(l.ZP,{item:!0,children:[(0,d.jsx)("br",{}),(0,d.jsxs)(l.ZP,{container:!0,columns:12,direction:"row",sx:{border:"1px solid #000"},children:[(0,d.jsx)(l.ZP,{item:!0,xs:3,direction:"row",children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"filled",type:"text",label:"LOAD ID",value:t.load_id,name:"loadID"})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,direction:"row"}),(0,d.jsx)(l.ZP,{item:!0,xs:6,direction:"row",children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"SITE",value:t.loadSite,name:"loadSite"})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,direction:"row",children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"TRIP NO",value:t.tripNumber,name:"tripNo"})}),(0,d.jsx)(l.ZP,{item:!0,xs:6,direction:"row",children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"MATERIAL",value:t.Material,name:"material"})}),(0,d.jsxs)(l.ZP,{item:!0,xs:6,direction:"row",children:[(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"YARD/TONNAGE",value:t.ton,name:"ton"}),(0,d.jsx)("br",{})]})]})]},t.load_id)}))}))})),(0,d.jsx)(l.ZP,{item:!0,xs:12,children:(0,d.jsx)(f.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Total Load",value:rt,name:"totalLoadInput",onChange:function(t){return at(t.target.value)}})})]}),(0,d.jsx)("br",{})]})]}),(0,d.jsx)("br",{}),(0,d.jsx)(c.Z,{variant:"outlined",sx:{height:"64.45px",width:"100%;",backgroundColor:"#fff",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return Lt()},children:"Send Email"})]})]}),(0,d.jsx)("br",{}),(0,d.jsx)(c.Z,{variant:"outlined",sx:{height:"64.45px",width:"100%;",backgroundColor:"#fff",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return v().push("../../dashboard/"+n)},children:"Dashboard"})]})})]})}k.auth={unauthorized:"/"}}},function(t){t.O(0,[32,830,229,823,362,689,774,888,179],(function(){return e=3380,t(t.s=e);var e}));var e=t.O();_N_E=e}]);