(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{9104:function(t,e,n){"use strict";var i=n(7294),r=n(6600),a=n(5893);e.Z=function(t){const{children:e,defer:n=!1,fallback:o=null}=t,[u,d]=i.useState(!1);return(0,r.Z)((()=>{n||d(!0)}),[n]),i.useEffect((()=>{n&&d(!0)}),[n]),(0,a.jsx)(i.Fragment,{children:u?e:o})}},3380:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/sendEmail/[id]",function(){return n(2861)}])},4627:function(t,e){"use strict";e.Z={src:"/_next/static/media/logo.bebc6ea0.webp",height:217,width:998,blurDataURL:"data:image/webp;base64,UklGRm4AAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAT4xGTkVGXD+UnjhAQj9HOQBWUDggNgAAALABAJ0BKggAAgACQDglAE6AId8Zv3gA/upd/TNb9zgv8w8T7xx92nvreGa6ZzIfJg1r6GvAAA=="}},8461:function(t,e,n){"use strict";n.r(e);var i=n(603),r=n(5893),a=n(7294),o=n(2293),u=n(7357),d=n(155),s=n(3946),l=n(5861),c=n(3375),f=n(3156),m=n(9661),p=n(2389),x=n(3599),h=n(4627),j=n(5675),Z=n.n(j),v=n(1163),g=n.n(v),k=n(3299);e.default=function(){var t=function(){y(null)},e=(0,i.Z)(a.useState(null),2),n=e[0],j=e[1],v=(0,i.Z)(a.useState(null),2),b=v[0],y=v[1],_=(0,i.Z)(a.useState(""),2),S=_[0],A=_[1],T=(0,k.useSession)();if(a.useEffect((function(){var t=window.localStorage.getItem("data");null!==t&&A(JSON.parse(t))}),[]),"authenticated"==T.status){T.data.user.email;var P=T.data.user.image;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.Z,{position:"static",color:"primary",enableColorOnDark:!0,style:{background:"#A9A9A9"},children:(0,r.jsx)(f.Z,{maxWidth:"xl",children:(0,r.jsxs)(d.Z,{disableGutters:!0,children:[(0,r.jsx)(l.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},onClick:function(){return g().push("/")},children:(0,r.jsx)(Z(),{src:h.Z,alt:"logo",width:175,height:45})}),(0,r.jsxs)(u.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,r.jsx)(s.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){j(t.currentTarget)},color:"inherit",children:(0,r.jsx)(c.Z,{})}),(0,r.jsx)(c.Z,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(n),onClose:function(){j(null)},sx:{display:{xs:"block",md:"none"}}})]}),(0,r.jsx)(l.Z,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:(0,r.jsx)(Z(),{src:h.Z,alt:"logo",width:175,height:45})}),(0,r.jsx)(u.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),(0,r.jsxs)(u.Z,{sx:{flexGrow:0},children:[(0,r.jsx)(p.Z,{title:"Open settings",children:(0,r.jsx)(s.Z,{onClick:function(t){y(t.currentTarget)},sx:{p:0},children:(0,r.jsx)(m.Z,{alt:"Gmail Photo",src:P})})}),(0,r.jsxs)(c.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(b),onClose:t,children:[(0,r.jsx)(x.Z,{onClick:function(){t(),g().push("/dashboard/profile/"+S.user_id)},children:"Profile"}),(0,r.jsx)(x.Z,{onClick:function(){(0,k.signOut)(),t(),g().push("/")},children:"Signout"})]})]})]})})})})}return(0,r.jsx)("div",{children:(0,r.jsx)("p",{children:" Please sign in."})})}},2861:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSG:function(){return v},default:function(){return g}});var i=n(7568),r=n(603),a=n(4051),o=n.n(a),u=n(5893),d=n(3156),s=n(6886),l=n(3321),c=n(64),f=n(8461),m=n(7294),p=n(7357),x=n(3299),h=n(9104),j=n(1163),Z=n.n(j),v=!0;function g(t){var e=t.data,n=t.id,a=function(){new Promise((function(t){setTimeout((function(){return t(H(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.contractor}))})).join("")),ct(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.customerName}))})).join("")),ct(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.customerName}))})).join("")),G(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.phone}))})).join("")),B(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.startTime}))})).join("")),R(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.endTime}))})).join("")),dt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.totalHours}))})).join("")),at(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.totalLoads}))})).join("")),V(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.deliveryLocation}))})).join("")),$(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.notes}))})).join("")),U(e.data.Users.map((function(t){if(t.uid===n)return t.driverLic})).join("")),E(e.data.Users.map((function(t){if(t.uid===n)return t.truckPlateNumber})).join("")),nt(e.data.Users.map((function(t){if(t.uid===n)return t.phone})).join("")),w(e.data.Users.map((function(t){if(t.uid===n)return t.company})).join("")),Nt.getTime(z),Ut.getTime(J),xt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.load_id}))}))}))),Zt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.loadSite}))}))}))),kt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.tripNumber}))}))}))),_t(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Material}))}))}))),Tt(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.ton}))}))})))),!0}),1e3)}))},j=(0,r.Z)(m.useState(""),2),v=j[0],g=j[1],k=(0,r.Z)(m.useState(""),2),b=k[0],y=k[1],_=(0,r.Z)(m.useState(""),2),S=_[0],A=_[1],T=(0,r.Z)(m.useState(""),2),P=T[0],w=T[1],C=(0,r.Z)(m.useState(""),2),N=C[0],U=C[1],I=(0,r.Z)(m.useState(""),2),L=I[0],E=I[1],D=(0,r.Z)(m.useState(""),2),O=D[0],G=D[1],F=(0,r.Z)(m.useState(0),2),z=F[0],B=F[1],Q=(0,r.Z)(m.useState(0),2),J=Q[0],R=Q[1],W=(0,r.Z)(m.useState(""),2),M=W[0],H=W[1],X=(0,r.Z)(m.useState(""),2),q=X[0],V=X[1],K=(0,r.Z)(m.useState(""),2),Y=K[0],$=K[1],tt=(0,r.Z)(m.useState(0),2),et=tt[0],nt=tt[1],it=(0,r.Z)(m.useState(0),2),rt=it[0],at=it[1],ot=(0,r.Z)(m.useState(""),2),ut=ot[0],dt=ot[1],st=(0,r.Z)(m.useState(""),2),lt=st[0],ct=st[1],ft=(0,x.useSession)(),mt=(0,r.Z)(m.useState([]),2),pt=mt[0],xt=mt[1],ht=(0,r.Z)(m.useState(""),2),jt=ht[0],Zt=ht[1],vt=(0,r.Z)(m.useState(""),2),gt=vt[0],kt=vt[1],bt=(0,r.Z)(m.useState(""),2),yt=bt[0],_t=bt[1],St=(0,r.Z)(m.useState(""),2),At=St[0],Tt=St[1],Pt=(0,r.Z)(m.useState(""),2),wt=Pt[0],Ct=Pt[1];m.useEffect((function(){"authenticated"===ft.status&&setGM(ft.data.user.email),Ct(JSON.parse(localStorage.getItem("data"))),a()}),[ft.status]);var Nt=new Date,Ut=new Date;function It(){return(It=(0,i.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={company:P,driverLic:N,truckNumber:L,clientPhone:O,startTime:z,endTime:J,contractor:M,deliveryLocation:q,notes:Y,phone:et,totalLoads:rt,totalHours:ut,customerName:lt,loadId:pt,loadSite:jt,tripNumber:gt,material:yt,ton:At},t.next=3,fetch("/api/mail.js",{method:"POST",body:JSON.stringify(e)});case 3:fetch("/api/mail.js",{method:"POST",body:JSON.stringify(e)});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return console.log(pt),!1===a()?(0,u.jsx)("div",{children:"loading"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(f.default,{}),(0,u.jsx)("br",{}),(0,u.jsx)(h.Z,{children:(0,u.jsxs)(d.Z,{children:[(0,u.jsxs)("form",{onSubmit:function(){return It.apply(this,arguments)},children:[(0,u.jsx)(p.Z,{children:(0,u.jsxs)(s.ZP,{container:!0,columns:12,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,children:[(0,u.jsx)(s.ZP,{item:!0,children:(0,u.jsx)(c.Z,{required:!0,id:"outlined-required",label:"Email 1",name:"email1",type:"text",value:v,style:{width:335},onChange:function(t){return g(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,children:(0,u.jsx)(c.Z,{id:"outlined",label:"Email 2",name:"email2",type:"text",value:b,style:{width:335},onChange:function(t){return y(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,children:(0,u.jsx)(c.Z,{id:"outlined",label:"Email 3",name:"email3",type:"text",value:S,style:{width:335},onChange:function(t){return A(t.target.value)}})})]})}),(0,u.jsx)("h4",{children:"Ticket Preview"}),(0,u.jsxs)(p.Z,{component:"form",children:[(0,u.jsxs)(s.ZP,{container:!0,row:12,rowSpacing:1,direction:"row",sx:{border:"1px solid #000",borderRadius:"5px"},children:[(0,u.jsx)("br",{}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Contractor",value:M,name:"contractorInput",onChange:function(t){return H(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Customer Name",value:lt,name:"customerNameInput",onChange:function(t){return ct(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Phone No.",value:et,name:"phoneInput",onChange:function(t){return nt(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Company",value:P,name:"companyInput",onChange:function(t){return w(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Truck No",value:L,name:"truckNumberInput",onChange:function(t){return E(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Driver Lic",value:N,name:"driverLicInput",onChange:function(t){return setDriverLic(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Client Phone No",value:O,name:"phoneClientInput",onChange:function(t){return G(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Start Time",value:Nt.toLocaleTimeString(),name:"startTimeInput",onChange:function(t){return B(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"End Time",value:Ut.toLocaleTimeString(),name:"endTimeInput",onChange:function(t){return R(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Total Hours",value:ut,name:"totalHoursInput",onChange:function(t){return dt(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Delivery Address",value:q,name:"deliveryLocationInput",onChange:function(t){return V(t.target.value)}})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Notes/Details for Delivery",multiline:!0,value:Y,name:"notesInput",onChange:function(t){return $(t.target.value)}})}),(0,u.jsxs)(p.Z,{children:[(0,u.jsxs)(s.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===wt.ticket_id})).map((function(t){return(0,u.jsxs)(s.ZP,{item:!0,children:[(0,u.jsx)("br",{}),(0,u.jsxs)(s.ZP,{container:!0,columns:12,direction:"row",sx:{border:"1px solid #000"},children:[(0,u.jsx)(s.ZP,{item:!0,xs:3,direction:"row",children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"filled",type:"text",label:"LOAD ID",value:t.load_id,name:"loadID"})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,direction:"row"}),(0,u.jsx)(s.ZP,{item:!0,xs:6,direction:"row",children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"SITE",value:t.loadSite,name:"loadSite"})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,direction:"row",children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"TRIP NO",value:t.tripNumber,name:"tripNo"})}),(0,u.jsx)(s.ZP,{item:!0,xs:6,direction:"row",children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"MATERIAL",value:t.Material,name:"material"})}),(0,u.jsxs)(s.ZP,{item:!0,xs:6,direction:"row",children:[(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"YARD/TONNAGE",value:t.ton,name:"ton"}),(0,u.jsx)("br",{})]})]})]},t.load_id)}))}))})),(0,u.jsx)(s.ZP,{item:!0,xs:12,children:(0,u.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Total Load",value:rt,name:"totalLoadInput",onChange:function(t){return at(t.target.value)}})})]}),(0,u.jsx)("br",{})]})]}),(0,u.jsx)("br",{}),(0,u.jsx)(l.Z,{variant:"outlined",sx:{height:"64.45px",width:"100%;",backgroundColor:"#fff",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){Z().push("../../dashboard/"+n)},children:"Send Email"})]})]}),(0,u.jsx)("br",{}),(0,u.jsx)(l.Z,{variant:"outlined",sx:{height:"64.45px",width:"100%;",backgroundColor:"#fff",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return Z().push("../../dashboard/"+n)},children:"Dashboard"})]})})]})}g.auth={unauthorized:"/"}}},function(t){t.O(0,[32,830,229,823,362,689,774,888,179],(function(){return e=3380,t(t.s=e);var e}));var e=t.O();_N_E=e}]);