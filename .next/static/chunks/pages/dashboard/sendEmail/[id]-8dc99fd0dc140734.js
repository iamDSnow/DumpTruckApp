(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{9104:function(t,e,n){"use strict";var r=n(7294),a=n(6600),i=n(5893);e.Z=function(t){const{children:e,defer:n=!1,fallback:o=null}=t,[s,u]=r.useState(!1);return(0,a.Z)((()=>{n||u(!0)}),[n]),r.useEffect((()=>{n&&u(!0)}),[n]),(0,i.jsx)(r.Fragment,{children:s?e:o})}},3380:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/sendEmail/[id]",function(){return n(2861)}])},4627:function(t,e){"use strict";e.Z={src:"/_next/static/media/logo.bebc6ea0.webp",height:217,width:998,blurDataURL:"data:image/webp;base64,UklGRm4AAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAT4xGTkVGXD+UnjhAQj9HOQBWUDggNgAAALABAJ0BKggAAgACQDglAE6AId8Zv3gA/upd/TNb9zgv8w8T7xx92nvreGa6ZzIfJg1r6GvAAA=="}},8461:function(t,e,n){"use strict";n.r(e);var r=n(603),a=n(5893),i=n(7294),o=n(2293),s=n(7357),u=n(155),d=n(3946),l=n(5861),c=n(3375),p=n(3156),x=n(9661),f=n(2389),m=n(3599),h=n(4627),j=n(5675),g=n.n(j),v=n(1163),Z=n.n(v),b=n(3299);e.default=function(){var t=function(){k(null)},e=(0,r.Z)(i.useState(),2),n=e[0],j=e[1],v=(0,r.Z)(i.useState(null),2),y=v[0],k=v[1],A=(0,r.Z)(i.useState(""),2),C=A[0],T=A[1],_=(0,b.useSession)(),I=Boolean(n);if(i.useEffect((function(){var t=window.localStorage.getItem("data");null!==t&&T(JSON.parse(t))}),[]),"authenticated"==_.status){_.data.user.email;var P=_.data.user.image;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.Z,{position:"static",color:"primary",enableColorOnDark:!0,style:{background:"#A9A9A9"},children:(0,a.jsx)(p.Z,{maxWidth:"xl",children:(0,a.jsxs)(u.Z,{disableGutters:!0,children:[(0,a.jsx)(l.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},onClick:function(){return Z().push("/")},children:(0,a.jsx)(g(),{src:h.Z,alt:"logo",width:175,height:45})}),(0,a.jsxs)(s.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,a.jsx)(d.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){j(t.currentTarget)},color:"inherit",children:(0,a.jsx)(c.Z,{})}),(0,a.jsx)(c.Z,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:I,onClose:function(){j(null)},sx:{display:{xs:"block",md:"none"}}})]}),(0,a.jsx)(l.Z,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:(0,a.jsx)(g(),{src:h.Z,alt:"logo",width:175,height:45})}),(0,a.jsx)(s.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),(0,a.jsxs)(s.Z,{sx:{flexGrow:0},children:[(0,a.jsx)(f.Z,{title:"Open settings",children:(0,a.jsx)(d.Z,{onClick:function(t){k(t.currentTarget)},sx:{p:0},children:(0,a.jsx)(x.Z,{alt:"Gmail Photo",src:P})})}),(0,a.jsxs)(c.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:y,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(y),onClose:t,children:[(0,a.jsx)(m.Z,{onClick:function(){t(),Z().push("/dashboard/profile/"+C.user_id)},children:"Profile"}),(0,a.jsx)(m.Z,{onClick:function(){(0,b.signOut)(),t(),Z().push("/")},children:"Signout"})]})]})]})})})})}return(0,a.jsx)("div",{children:(0,a.jsx)("p",{})})}},2861:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSG:function(){return v},default:function(){return Z}});var r=n(7568),a=n(603),i=n(4051),o=n.n(i),s=n(5893),u=n(3156),d=n(6886),l=n(3321),c=n(64),p=n(8461),x=n(7294),f=n(7357),m=n(3299),h=n(9104),j=n(1163),g=n.n(j),v=!0;function Z(t){var e=t.data,n=t.id,i=(0,a.Z)(x.useState(""),2),j=i[0],v=i[1],Z=(0,a.Z)(x.useState(""),2),b=Z[0],y=(Z[1],(0,m.useSession)()),k=(y.data,y.status);if(x.useEffect((function(){return"authenticated"===k&&v(JSON.parse(localStorage.getItem("data"))),function(){}}),[k]),!1===b)return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("h1",{children:"Loading"})});{var A=(0,a.Z)(x.useState(""),2),C=A[0],T=A[1],_=(0,a.Z)(x.useState(""),2),I=_[0],P=_[1],S=(0,a.Z)(x.useState(""),2),w=S[0],N=S[1],L=e.data.Users.map((function(t){if(t.uid===n)return t.company})).join(""),E=e.data.Users.map((function(t){if(t.uid===n)return t.driverLic})).join(""),U=e.data.Users.map((function(t){if(t.uid===n)return t.truckPlateNumber})).join(""),D=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.phone}))})).join(""):"",O=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.startTime}))})).join(""):"",G=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.endTime}))})).join(""):"",F=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.contractor}))})).join(""):"",z=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.deliveryLocation}))})).join(""):"",B=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.notes}))})).join(""):"",Q=j?e.data.Users.map((function(t){if(t.uid===n)return t.phone})).join(""):"",J=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.totalLoads}))})).join(""):"",R=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.totalHours}))})).join(""):"",W=j?e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.customerName}))})).join(""):"",H=j?function(t){for(var e=0;e<t.length;e++)t[e];return t}(e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.Loads.map((function(t){return t}))}))}))):"",M=new Date,X=new Date;function q(t){return V.apply(this,arguments)}function V(){return(V=(0,r.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={company:L,driverLic:E,truckNumber:U,clientPhone:D,startTime:O,endTime:G,contractor:F,deliveryLocation:z,notes:B,phone:Q,totalLoads:J,totalHours:R,customerName:W,loadInfo:H[0][0]},t.prev=1,t.next=4,fetch("/api/mail",{method:"POST",body:JSON.stringify(n)});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:console.log(n);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}return M.getTime(O),X.getTime(G),H?console.log(JSON.stringify(H[0][0])):console.log("did not run"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.default,{}),(0,s.jsx)("br",{}),(0,s.jsx)(h.Z,{children:(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)("form",{onSubmit:q,children:[(0,s.jsx)(f.Z,{children:(0,s.jsxs)(d.ZP,{container:!0,columns:12,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,children:[(0,s.jsx)(d.ZP,{item:!0,children:(0,s.jsx)(c.Z,{required:!0,id:"outlined-required",label:"Email 1",name:"email1",type:"text",value:C,style:{width:335},onChange:function(t){return T(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,children:(0,s.jsx)(c.Z,{id:"outlined",label:"Email 2",name:"email2",type:"text",value:I,style:{width:335},onChange:function(t){return P(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,children:(0,s.jsx)(c.Z,{id:"outlined",label:"Email 3",name:"email3",type:"text",value:w,style:{width:335},onChange:function(t){return N(t.target.value)}})})]})}),(0,s.jsx)("h4",{children:"Ticket Preview"}),(0,s.jsxs)(f.Z,{children:[(0,s.jsxs)(d.ZP,{container:!0,row:12,rowSpacing:1,direction:"row",sx:{border:"1px solid #000",borderRadius:"5px"},children:[(0,s.jsx)("br",{}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Contractor",value:F,name:"contractorInput",onChange:function(t){return setCustomerNameInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Customer Name",value:W,name:"customerNameInput",onChange:function(t){return setCustomerNameInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Phone No.",value:Q,name:"phoneInput",onChange:function(t){return setPhoneInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Company",value:L,name:"companyInput",onChange:function(t){return setCompanyInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Truck No",value:U,name:"truckNumberInput",onChange:function(t){return setTruckNumberInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Driver Lic",value:E,name:"driverLicInput",onChange:function(t){return setDriverLic(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Client Phone No",value:D,name:"phoneClientInput",onChange:function(t){return setPhoneClientInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Start Time",value:M.toLocaleTimeString(),name:"startTimeInput",onChange:function(t){return setStartTimeInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"End Time",value:X.toLocaleTimeString(),name:"endTimeInput",onChange:function(t){return setEndTimeInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Total Hours",value:R,name:"totalHoursInput",onChange:function(t){return setTotalHoursInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Delivery Address",value:z,name:"deliveryLocationInput",onChange:function(t){return setDeliveryLocationInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Notes/Details for Delivery",multiline:!0,value:B,name:"notesInput",onChange:function(t){return setNotesInput(t.target.value)}})}),(0,s.jsxs)(f.Z,{children:[(0,s.jsxs)(d.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[e.data.Users.map((function(t){if(t.uid===n)return t.Tickets.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return t.Loads.filter((function(t){return t.ticket_id===j.ticket_id})).map((function(t){return(0,s.jsxs)(d.ZP,{item:!0,children:[(0,s.jsx)("br",{}),(0,s.jsxs)(d.ZP,{container:!0,columns:12,direction:"row",sx:{border:"1px solid #000"},children:[(0,s.jsx)(d.ZP,{item:!0,xs:3,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"filled",type:"text",label:"LOAD ID",value:t.load_id,name:"loadID",onChange:function(t){return setLoadIdInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"SITE",value:t.loadSite,name:"loadSite",onChange:function(t){return setLoadSiteInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"TRIP NO",value:t.tripNumber,name:"tripNo",onChange:function(t){return setTripNumberInput(t.target.value)}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"MATERIAL",value:t.Material,name:"material",onChange:function(t){return setMaterialInput(t.target.value)}})}),(0,s.jsxs)(d.ZP,{item:!0,xs:6,children:[(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"YARD/TONNAGE",value:t.ton,name:"ton",onChange:function(t){return setTonInput(t.target.value)}}),(0,s.jsx)("br",{})]})]})]},t.load_id)}))}))})),(0,s.jsx)(d.ZP,{item:!0,xs:12,children:(0,s.jsx)(c.Z,{disabled:!0,id:"standard-read-only-input",variant:"standard",type:"text",label:"Total Load",value:J,name:"totalLoadInput"})})]}),(0,s.jsx)("br",{})]})]}),(0,s.jsx)("br",{}),(0,s.jsx)(l.Z,{variant:"outlined",sx:{height:"64.45px",width:"100%;",backgroundColor:"#fff",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){q()},children:"Send Email"})]})]}),(0,s.jsx)("br",{}),(0,s.jsx)(l.Z,{variant:"outlined",sx:{height:"64.45px",width:"100%;",backgroundColor:"#fff",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return g().push("/dashboard/"+n)},children:"Dashboard"})]})})]})}}Z.auth={unauthorized:"/"}}},function(t){t.O(0,[32,830,229,823,362,689,774,888,179],(function(){return e=3380,t(t.s=e);var e}));var e=t.O();_N_E=e}]);