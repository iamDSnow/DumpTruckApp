(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{9518:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/ticketCon/[id]",function(){return n(1784)}])},4627:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.bebc6ea0.webp",height:217,width:998,blurDataURL:"data:image/webp;base64,UklGRm4AAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAT4xGTkVGXD+UnjhAQj9HOQBWUDggNgAAALABAJ0BKggAAgACQDglAE6AId8Zv3gA/upd/TNb9zgv8w8T7xx92nvreGa6ZzIfJg1r6GvAAA=="}},8461:function(e,t,n){"use strict";n.r(t);var r=n(603),i=n(5893),o=n(7294),a=n(2293),s=n(7357),u=n(155),c=n(3946),l=n(5861),d=n(3375),h=n(3156),x=n(9661),f=n(2389),m=n(3599),p=n(4627),j=n(5675),Z=n.n(j),g=n(1163),b=n.n(g),k=n(3299);t.default=function(){var e=function(){y(null)},t=(0,r.Z)(o.useState(),2),n=t[0],j=t[1],g=(0,r.Z)(o.useState(null),2),v=g[0],y=g[1],A=(0,r.Z)(o.useState(""),2),w=A[0],_=A[1],C=(0,k.useSession)(),S=Boolean(n);if(o.useEffect((function(){var e=window.localStorage.getItem("data");null!==e&&_(JSON.parse(e))}),[]),"authenticated"==C.status){C.data.user.email;var T=C.data.user.image;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a.Z,{position:"static",color:"primary",enableColorOnDark:!0,style:{background:"#A9A9A9"},children:(0,i.jsx)(h.Z,{maxWidth:"xl",children:(0,i.jsxs)(u.Z,{disableGutters:!0,children:[(0,i.jsx)(l.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},onClick:function(){return b().push("/")},children:(0,i.jsx)(Z(),{src:p.Z,alt:"logo",width:175,height:45})}),(0,i.jsxs)(s.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,i.jsx)(c.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:(0,i.jsx)(d.Z,{})}),(0,i.jsx)(d.Z,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:S,onClose:function(){j(null)},sx:{display:{xs:"block",md:"none"}}})]}),(0,i.jsx)(l.Z,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:(0,i.jsx)(Z(),{src:p.Z,alt:"logo",width:175,height:45})}),(0,i.jsx)(s.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),(0,i.jsxs)(s.Z,{sx:{flexGrow:0},children:[(0,i.jsx)(f.Z,{title:"Open settings",children:(0,i.jsx)(c.Z,{onClick:function(e){y(e.currentTarget)},sx:{p:0},children:(0,i.jsx)(x.Z,{alt:"Gmail Photo",src:T})})}),(0,i.jsxs)(d.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:v,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(v),onClose:e,children:[(0,i.jsx)(m.Z,{onClick:function(){e(),b().push("/dashboard/profile/"+w.user_id)},children:"Profile"}),(0,i.jsx)(m.Z,{onClick:function(){(0,k.signOut)(),e(),b().push("/")},children:"Signout"})]})]})]})})})})}return(0,i.jsx)("div",{children:(0,i.jsx)("p",{})})}},1784:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return I},default:function(){return U}});var r=n(7568),i=n(4924),o=n(6042),a=n(9396),s=n(9534),u=n(603),c=n(4051),l=n.n(c),d=n(5893),h=n(6886),x=n(3321),f=n(64),m=n(8461),p=n(7294),j=n(5697),Z=n.n(j),g=n(1703),b=n(44),k=n(5861),v=n(7357),y=n(9353),A=n(2359),w=n(2796),_=n(3299),C=n(9104),S=n(1163),T=n.n(S);function P(e){var t=e.children,n=e.value,r=e.index,i=(0,s.Z)(e,["children","value","index"]);return(0,d.jsx)("div",(0,a.Z)((0,o.Z)({role:"tabpanel",hidden:n!==r,id:"".concat(r),"aria-labelledby":"tab-".concat(r)},i),{children:n===r&&(0,d.jsx)(v.Z,{sx:{p:2},children:(0,d.jsx)(k.Z,{children:t})})}))}function N(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}P.propTypes={children:Z().node,index:Z().number.isRequired,value:Z().number.isRequired};var I=!0;function U(e){var t=e.data,n=e.id,s=(0,u.Z)(p.useState(0),2),c=s[0],j=s[1],Z=(0,u.Z)(p.useState(0),2),k=Z[0],S=Z[1],I=(0,u.Z)(p.useState(""),2),U=I[0],$=I[1],L=(0,u.Z)(p.useState(""),2),O=L[0],q=L[1],F=(0,u.Z)(p.useState(""),2),G=F[0],E=F[1],H=(0,u.Z)(p.useState(0),2),D=H[0],V=H[1],B=(0,u.Z)(p.useState(0),2),M=B[0],z=B[1],J=(0,u.Z)(p.useState(""),2),Q=J[0],W=J[1],R=(0,u.Z)(p.useState(""),2),X=R[0],K=R[1],Y=(0,u.Z)(p.useState(""),2),ee=Y[0],te=Y[1],ne=(0,u.Z)(p.useState(0),2),re=ne[0],ie=ne[1],oe=function(){var e=(0,r.Z)(l().mark((function e(t){var o,a,s,u,d,h,x;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,t,n){return s.apply(this,arguments)},s=function(){return s=(0,r.Z)(l().mark((function e(t,n,r){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://just-chamois-38.hasura.app/v1/graphql",{method:"POST",headers:(0,i.Z)({},"x-hasura-admin-secret","MLy43KG049rHc1UVMsodU7dVHYrouGG3KEJ18Pm7z45qdxhZqAcnVte00i7uO4HY"),body:JSON.stringify({query:t,variables:r,operationName:n})});case 2:return o=e.sent,e.next=5,o.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},d=function(){return a(u,"MyMutation",o)},h=function(){return x.apply(this,arguments)},x=function(){return x=(0,r.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:t=e.sent,n=t.errors,r=t.data,n&&console.error(n),console.log(r),console.log("ran");case 8:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)},e.next=7,te(t);case 7:return e.next=9,V(t);case 9:return e.next=11,{ticket_id:ee,deliveryLocation:O,contractor:U,customerName:X,totalLoads:M,startTime:String(c),endTime:String(k),totalHours:Q,notes:G,phone:Number(D)};case 11:o=e.sent,console.log("payload ready..."+JSON.stringify(o)),o&&(console.log("ran"),u='\n      mutation MyMutation($ticket_id: Int = 0, $contractor: String = "", $customerName: String = "", $deliveryLocation: String = "", $endTime: String = "", $notes: String = "", $phone: Int = 0, $startTime: String = "", $totalHours: String = "", $totalLoads: Int = 0) {\n        update_Tickets_by_pk(pk_columns: {ticket_id: $ticket_id}, _set: {contractor: $contractor, customerName: $customerName, deliveryLocation: $deliveryLocation, endTime: $endTime, notes: $notes, phone: $phone, startTime: $startTime, totalHours: $totalHours, totalLoads: $totalLoads}) {\n          contractor\n          customerName\n          deliveryLocation\n          endTime\n          notes\n          phone\n          startTime\n          ticket_id\n          totalHours\n          totalLoads\n        }\n      }\n      \n    ',h()),T().push("../../dashboard/"+n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=(0,_.useSession)(),se=(ae.data,ae.status),ue=(0,u.Z)(p.useState(!1),2),ce=ue[0],le=ue[1],de=(0,u.Z)(p.useState(""),2),he=de[0],xe=de[1];return p.useEffect((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("authenticated"!==se){e.next=4;break}return e.next=3,xe(JSON.parse(localStorage.getItem("data")));case 3:return e.abrupt("return",(function(){}));case 4:case"end":return e.stop()}}),e)}))),[se]),ce?console.log("success"):new Promise((function(e){setTimeout((function(){return e($(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.contractor}))})).join("")),K(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.customerName}))})).join("")),V(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.phone}))})).join("")),j(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.startTime}))})).join("")),S(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.endTime}))})).join("")),W(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.totalHours}))})).join("")),z(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.totalLoads}))})).join("")),q(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.deliveryLocation}))})).join("")),E(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.notes}))})).join("")),te(t.data.Users.map((function(e){if(e.uid===n)return e.Tickets.filter((function(e){return e.ticket_id===he.ticket_id})).map((function(e){return e.ticket_id}))})).join("")),le(!0)),function(){}}),1e3)})),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m.default,{}),(0,d.jsxs)(C.Z,{children:[(0,d.jsx)(v.Z,{container:!0,children:(0,d.jsxs)(h.ZP,{container:!0,columns:16,direction:"row",justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(h.ZP,{item:!0,xs:9}),(0,d.jsx)(h.ZP,{item:!0,xs:4,children:(0,d.jsx)(f.Z,{disabled:!0,InputProps:{readOnly:!0},id:"standard-read-only-input",variant:"standard",type:"number",value:ee,name:"ticket_idInput",onChange:function(e){return te(Number(he.ticket_id))}})})]})}),(0,d.jsxs)(v.Z,{sx:{width:"100%"},children:[(0,d.jsx)(v.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,d.jsxs)(g.Z,{value:re,onChange:function(e,t){ie(t)},"aria-label":"app tabs",children:[(0,d.jsx)(b.Z,(0,o.Z)({label:"Hauling For"},N(0))),(0,d.jsx)(b.Z,(0,o.Z)({label:"Who's Hauling"},N(1)))]})}),(0,d.jsx)(P,{value:re,index:0,children:(0,d.jsxs)(v.Z,{sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[(0,d.jsx)(h.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:(0,d.jsxs)("form",{onSubmit:oe,children:[(0,d.jsxs)(h.ZP,{container:!0,columns:12,direction:"column",justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(h.ZP,{item:!0,xs:10,children:(0,d.jsx)(f.Z,{required:!0,id:"outlined-required",type:"text",label:"Contractor",value:U,name:"contractorInput",style:{width:335},onChange:function(e){return $(e.target.value)}})}),(0,d.jsx)(h.ZP,{item:!0,xs:10,children:(0,d.jsx)(f.Z,{required:!0,id:"outlined-required",type:"text",label:"Customer Name",name:"customerNameInput",value:X,style:{width:335},onChange:function(e){return K(e.target.value)}})}),(0,d.jsx)(h.ZP,{item:!0,xs:10,children:(0,d.jsx)(f.Z,{required:!0,id:"outlined-required",label:"Phone No",value:D,type:"text",style:{width:335},onChange:function(e){return V(e.target.value)}})})]}),(0,d.jsx)(h.ZP,{container:!0,direction:"row",children:(0,d.jsxs)(A._,{dateAdapter:w.Z,children:[(0,d.jsx)(h.ZP,{item:!0,xs:5.6,children:(0,d.jsx)(y.j,{label:"Start Time",id:"outlined-required",value:c,name:"startTimeInput",onChange:function(e){return j(e)},renderInput:function(e){return(0,d.jsx)(f.Z,(0,a.Z)((0,o.Z)({},e),{style:{width:155}}))}})}),(0,d.jsxs)(h.ZP,{item:!0,xs:6,children:[(0,d.jsx)(y.j,{label:"End Time",id:"outlined-required",value:k,name:"endTimeInput",onChange:function(e){return S(e)},renderInput:function(e){return(0,d.jsx)(f.Z,(0,a.Z)((0,o.Z)({},e),{style:{width:170}}))}})," "]})]})}),(0,d.jsxs)(h.ZP,{container:!0,columns:12,direction:"column",justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(h.ZP,{item:!0,xs:10,children:(0,d.jsx)(f.Z,{id:"outlined-number",label:"Total Hours",name:"totalHoursInput",type:"text",value:Q,InputLabelProps:{shrink:!0},style:{width:335},onChange:function(e){return W(e.target.value)}})}),(0,d.jsx)(h.ZP,{item:!0,xs:10,children:(0,d.jsx)(f.Z,{required:!0,id:"outlined-required",label:"Delivery Address",name:"deliveryLocationInput",type:"text",value:O,style:{width:335},onChange:function(e){return q(e.target.value)}})}),(0,d.jsx)(h.ZP,{item:!0,xs:10,children:(0,d.jsx)(f.Z,{id:"outlined-multiline-static",label:"Notes/Details for Delivery",name:"notesInput",multiline:!0,rows:4,value:G,type:"text",style:{width:335},onChange:function(e){return E(e.target.value)}})}),(0,d.jsx)(h.ZP,{item:!0,xs:12,children:(0,d.jsx)(x.Z,{type:"button",onClick:oe,variant:"outlined",sx:{height:"64.45px",width:"335px;",backgroundColor:"#A9A9A9",color:"#000",borderColor:"transparent","&:hover":{backgroundColor:"#FFA500",color:"#000"}},children:"Save"})}),(0,d.jsx)("br",{}),(0,d.jsx)(h.ZP,{item:!0,children:(0,d.jsx)(x.Z,{variant:"outlined",sx:{height:"64.45px",width:"335px;",backgroundColor:"#A9A9A9",borderColor:"transparent",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return T().push("/dashboard/"+n)},children:"Cancel"})})]})]})}),(0,d.jsx)("br",{})]})}),(0,d.jsx)(P,{value:re,index:1,children:(0,d.jsx)(v.Z,{sx:{"& .MuiTextField-root":{width:"25ch",paddingBottom:"15px"}},noValidate:!0,autoComplete:"off",children:(0,d.jsx)(h.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:(0,d.jsxs)(h.ZP,{container:!0,columns:12,direction:"column",justifyContent:"center",alignItems:"center",children:[(0,d.jsxs)("form",{children:[(0,d.jsx)(h.ZP,{item:!0,children:(0,d.jsx)(f.Z,{disabled:!0,id:"outlined-disabled",label:"Company Name",defaultValue:t.data.Users.map((function(e){if(e.uid===n)return e.company})),style:{width:335}})}),(0,d.jsx)(h.ZP,{item:!0,children:(0,d.jsx)(f.Z,{disabled:!0,id:"outlined-disabled",label:"Driver",defaultValue:t.data.Users.map((function(e){if(e.uid===n)return e.driverLic})),style:{width:335}})}),(0,d.jsx)(h.ZP,{item:!0,children:(0,d.jsx)(f.Z,{disabled:!0,id:"outlined-disabled",label:"Truck No",defaultValue:t.data.Users.map((function(e){if(e.uid===n)return e.truckPlateNumber})),style:{width:335}})}),(0,d.jsx)(h.ZP,{item:!0,children:(0,d.jsx)(f.Z,{disabled:!0,id:"outlined-disabled",label:"Phone No",defaultValue:t.data.Users.map((function(e){if(e.uid===n)return e.phone})),style:{width:335}})}),(0,d.jsx)(h.ZP,{item:!0,children:(0,d.jsx)(x.Z,{variant:"outlined",sx:{height:"64.45px",width:"335px;",backgroundColor:"#A9A9A9",borderColor:"transparent",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return T().push("../sendEmail/"+n)},children:"Send"})})]}),(0,d.jsx)("br",{}),(0,d.jsx)(h.ZP,{item:!0,xs:10,children:(0,d.jsx)(x.Z,{variant:"outlined",sx:{height:"64.45px",width:"335px;",backgroundColor:"#fff",color:"#000","&:hover":{backgroundColor:"#FFA500",color:"#000"}},onClick:function(){return T().push("../loadData/"+n)},children:"View Load"})})]})})})})]})]})]})}U.auth={unauthorized:"/"}}},function(e){e.O(0,[525,686,484,362,689,297,774,888,179],(function(){return t=9518,e(e.s=t);var t}));var t=e.O();_N_E=t}]);